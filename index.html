<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroVR - Mental Wellness Through VR Therapy</title>
    <style>
        /* Combined CSS from both files with enhancements */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 50%, #2d2d2d 100%);
            color: #fff;
            min-height: 100vh;
        }

        /* Login styles */
        .login-page {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-container {
            display: flex;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            width: 100%;
            max-width: 1200px;
            min-height: 700px;
        }

        /* Dashboard styles */
        .dashboard-page {
            display: none;
        }

        /* Other styles from both files would be combined here */
        /* ... (All the CSS from both files would be properly merged) ... */
        
        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: #fff;
            padding: 14px 18px;
            border-radius: 12px;
            z-index: 1200;
            transform: translateX(120%);
            transition: transform .3s ease;
            box-shadow: 0 14px 30px rgba(0, 0, 0, .35);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <!-- Login form content from login.html -->
            <div class="login-form">
                <div class="logo-section">
                    <div class="logo">
                        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <!-- SVG content from login.html -->
                        </svg>
                    </div>
                    <span class="brand-name">NeuroVR</span>
                </div>
                
                <h1 class="form-title">Sign in</h1>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-input" id="email" placeholder="john.doe@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" class="checkbox" id="remember">
                        <label for="remember" class="checkbox-label">Remember me</label>
                    </div>
                    
                    <button type="submit" class="signin-button">Sign in</button>
                    
                    <div class="form-links">
                        <a href="#" id="showSignup">Don't have an account? Sign up</a>
                        <a href="#">Forgot Password</a>
                    </div>
                    
                    <div class="test-credentials">
                        <p>Test credentials: admin@neurovr.com / password123</p>
                    </div>
                </form>
            </div>
            
            <div class="welcome-section">
                <!-- Welcome content from login.html -->
            </div>
        </div>

        <!-- About Us Popup (from login.html) -->
        <div class="popup-overlay" id="aboutPopup">
            <!-- Popup content from login.html -->
        </div>
    </div>

    <!-- Dashboard Page -->
    <div class="dashboard-page" id="dashboardPage">
        <!-- Entire dashboard_ff.html content goes here -->
        <!-- Navbar -->
        <div class="navbar">
            <div class="logo"><div class="logo-icon"></div>NeuroVR</div>
            <div class="nav-links">
                <div class="nav-link active" data-target="dashboard">Dashboard</div>
                <div class="nav-link" data-target="profile">Profile</div>
                <div class="nav-link" data-target="reports">Reports</div>
                <div class="nav-link" data-target="analytics">Analytics</div>
            </div>

            <div class="user-profile" id="userProfile">
                <div class="user-info">
                    <div class="user-name">John Doe</div>
                    <div class="user-status">Premium Member</div>
                </div>
                <div class="user-avatar">JD</div>

                <!-- Dropdown -->
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="dropdown-item" data-target="profile">üë§ View Profile</div>
                    <div class="dropdown-item" data-target="reports">üìä My Reports</div>
                    <div class="dropdown-item" id="themeToggle">üåì Toggle Theme</div>
                    <div class="dropdown-item" id="logoutBtn">üö™ Logout</div>
                </div>
            </div>
        </div>

        <!-- Rest of dashboard content from dashboard_ff.html -->
        <!-- ... -->
    </div>

    <!-- Notification Toast -->
    <div class="notification" id="toast">‚úîÔ∏è Action completed.</div>

    <script>
        // Test credentials
        const TEST_CREDENTIALS = {
            email: 'admin@neurovr.com',
            password: 'password123'
        };

        // DOM elements
        const loginPage = document.getElementById('loginPage');
        const dashboardPage = document.getElementById('dashboardPage');
        const loginForm = document.getElementById('loginForm');
        const toast = document.getElementById('toast');
        const logoutBtn = document.getElementById('logoutBtn');

        // Show notification
        function showToast(message, isError = false) {
            toast.textContent = message;
            toast.classList.remove('error');
            if (isError) {
                toast.classList.add('error');
            }
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Check if user is logged in (from localStorage)
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('neurovr_loggedIn');
            const userEmail = localStorage.getItem('neurovr_userEmail');
            
            if (isLoggedIn === 'true' && userEmail) {
                showDashboard(userEmail);
            }
        }

        // Show dashboard page
        function showDashboard(email) {
            loginPage.style.display = 'none';
            dashboardPage.style.display = 'block';
            
            // Update user info if needed
            const userElement = document.querySelector('.user-name');
            if (userElement && email) {
                userElement.textContent = email.split('@')[0];
            }
        }

        // Handle login form submission
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('remember').checked;
            
            // Simple validation
            if (!email || !password) {
                showToast('Please enter both email and password', true);
                return;
            }
            
            // Check against test credentials
            if (email === TEST_CREDENTIALS.email && password === TEST_CREDENTIALS.password) {
                // Store login status
                if (rememberMe) {
                    localStorage.setItem('neurovr_loggedIn', 'true');
                    localStorage.setItem('neurovr_userEmail', email);
                } else {
                    sessionStorage.setItem('neurovr_loggedIn', 'true');
                    sessionStorage.setItem('neurovr_userEmail', email);
                }
                
                showToast('Login successful! Redirecting...');
                setTimeout(() => showDashboard(email), 1000);
            } else {
                showToast('Invalid credentials. Try admin@neurovr.com / password123', true);
            }
        });

        // Handle logout
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('neurovr_loggedIn');
                localStorage.removeItem('neurovr_userEmail');
                sessionStorage.removeItem('neurovr_loggedIn');
                sessionStorage.removeItem('neurovr_userEmail');
                
                dashboardPage.style.display = 'none';
                loginPage.style.display = 'flex';
                loginForm.reset();
                
                showToast('You have been logged out');
            });
        }

        // Check login status on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            
            // Add test credentials hint
            const testHint = document.createElement('div');
            testHint.style.marginTop = '20px';
            testHint.style.padding = '10px';
            testHint.style.backgroundColor = '#f0f0f0';
            testHint.style.borderRadius = '5px';
            testHint.style.fontSize = '14px';
            testHint.innerHTML = `<strong>Test Credentials:</strong><br>Email: ${TEST_CREDENTIALS.email}<br>Password: ${TEST_CREDENTIALS.password}`;
            
            loginForm.appendChild(testHint);
        });

        // All the dashboard functionality from dashboard_ff.html
        // ===== Helpers =====
        const $ = (q,scope=document)=>scope.querySelector(q);
        const $$ = (q,scope=document)=>Array.from(scope.querySelectorAll(q));

        function showToast(msg='Done!') {
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(()=>toast.classList.remove('show'), 2600);
        }

        // ===== Section Nav =====
        function activateSection(id) {
            $$('.main-content').forEach(s=>s.classList.remove('active'));
            $('#'+id).classList.add('active');
            $$('.nav-link').forEach(n=>n.classList.remove('active'));
            const link = $(`.nav-link[data-target="${id}"]`);
            if(link) link.classList.add('active');
            // close dropdown if open
            $('#profileDropdown').classList.remove('show');
        }

        $$('.nav-link').forEach(link=>{
            link.addEventListener('click',()=>activateSection(link.dataset.target));
        });

        // shortcuts from buttons with data-target
        document.addEventListener('click', (e)=>{
            const el = e.target.closest('[data-target]');
            if(el && !el.classList.contains('nav-link')){
                activateSection(el.dataset.target);
            }
        });

        // ===== Profile Dropdown =====
        const profileBtn = $('#userProfile');
        const dropdown = $('#profileDropdown');
        profileBtn.addEventListener('click', (e)=>{
            dropdown.classList.toggle('show');
            e.stopPropagation();
        });
        document.addEventListener('click',(e)=>{
            if(!profileBtn.contains(e.target)) dropdown.classList.remove('show');
        });

        $('#themeToggle').addEventListener('click', ()=>{
            // simple playful toggle notice
            showToast('Theme toggled ‚ú®');
        });

        // ===== Therapy Sessions (open modal) =====
        const modal = $('#sessionModal');
        const closeModal = $('#closeModal');
        const startBtn = $('#startSessionBtn');

        $$('.session-card').forEach(card=>{
            card.addEventListener('click', ()=>{
                const name = card.dataset.session || 'Therapy Session';
                $('#modalTitle').textContent = name;
                $('#modalBody').textContent = `You're starting "${name}". Put on your headset and follow the on-screen guidance.`;
                modal.classList.add('show');
            });
        });

        closeModal.addEventListener('click', ()=>modal.classList.remove('show'));
        modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.classList.remove('show'); });

        startBtn.addEventListener('click', ()=>{
            modal.classList.remove('show');
            showToast('Session started ‚úÖ');
        });

        // ===== Sidebar actions =====
        $('#refreshBtn').addEventListener('click', ()=>showToast('Sessions refreshed üîÑ'));
        $('#newSession').addEventListener('click', ()=>showToast('New session created ‚ûï'));
        $('#exportReport').addEventListener('click', ()=>showToast('Report exported üì§'));
        $('#startBreathing').addEventListener('click', ()=>showToast('Breathing cycle started üßò'));
        $('#saveProfile').addEventListener('click', ()=>showToast('Profile saved ‚úîÔ∏è'));
        $('#savePrefs').addEventListener('click', ()=>showToast('Preferences updated üíæ'));

        // ===== Progress Ring (demo animation to 70%) =====
        function animateRing(el, target=70, duration=900){
            const start = performance.now();
            function step(now){
                const p = Math.min((now - start)/duration, 1);
                const val = Math.round(p*target);
                el.style.setProperty('--p', val);
                $('#goalText').textContent = val + '%';
                if(p<1) requestAnimationFrame(step);
            }
            requestAnimationFrame(step);
        }
        
        // Initialize the dashboard when it becomes visible
        if (dashboardPage.style.display === 'block') {
            animateRing($('#goalRing'), 70);
        }
    </script>
</body>
</html>
